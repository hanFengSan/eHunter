# Phase 0 Research: 统一更多设置弹窗

## Decision 1: 统一弹窗采用“单滚动内容区 + 左侧锚点导航”

- Decision: 右侧使用单一可滚动内容区承载全部分类分组，左侧分类仅做跳转与定位，不做页面切换。
- Rationale: 保留上下文和编辑状态，减少切换成本，符合“分类用于快速滚动定位”的需求。
- Alternatives considered:
  - 分类切页/Tab：分离更强，但跨类对照配置成本更高。
  - 纯折叠面板：移动端友好，但桌面端分类地图感较弱。

## Decision 2: 分类定位采用平滑滚动 + 当前分类高亮

- Decision: 左侧点击触发右侧分组平滑滚动并高亮当前分类；不自动折叠其他分组。
- Rationale: 与澄清结论一致，可维持阅读定位感并避免内容突变。
- Alternatives considered:
  - 无动画立即跳转：实现简单，但感知突兀。
  - 只点击高亮不滚动：会与用户预期不一致。

## Decision 3: 快捷配置使用“全局一份排序 + 按模式过滤显示”

- Decision: 快捷项维护单一全局排序，渲染时按当前阅读模式过滤模式专属项；“阅读模式”固定第一位。
- Rationale: 满足“可拖拽排序 + 模式专属项仅对应模式显示”，同时避免双排序模型带来的维护复杂度。
- Alternatives considered:
  - 每种模式独立排序：灵活但易造成顺序漂移与认知负担。
  - 不持久化排序：不满足需求的可持续效率目标。

## Decision 4: “清空缓存”语义升级为“清空缓存并重置全部设置”且需二次确认

- Decision: 在“其他”分类中将该动作定义为组合高风险操作：清空缓存 + 恢复全部配置默认值；执行前必须二次确认。
- Rationale: 与澄清结果一致，避免误触导致不可逆结果。
- Alternatives considered:
  - 仅清缓存不重置设置：与已确认需求冲突。
  - 不确认直接执行：误操作风险高。

## Decision 5: 配置持久化沿用“userscript 优先，localStorage 降级”

- Decision: 继续使用 userscript storage 作为首选偏好存储，失败时降级至平台存储/localStorage；读取时对非法值执行回退。
- Rationale: 与现有项目能力一致，降低迁移成本并保证注入场景稳定性。
- Alternatives considered:
  - 仅 localStorage：在 userscript 场景兼容性与隔离性较差。
  - 引入新存储方案：超出本需求范围。

## Decision 6: 全量覆盖当前可配置项并移除旧二层更多设置入口

- Decision: 新弹窗覆盖当前全部已开放配置项（含旧二层高级项），并删除旧顶栏二层“更多设置”展开交互。
- Rationale: 消除重复入口与配置分裂，确保“不能遗漏”可被验证。
- Alternatives considered:
  - 只迁移部分项：会导致功能缺失。
  - 暂时并存双入口：增加维护和用户理解成本。

## Decision 7: 响应式布局策略

- Decision: 桌面端采用稳定双列（左导航固定、右内容滚动）；窄屏切换为单列内容 + 顶部分类跳转控件，但保留同一分组结构。
- Rationale: 兼容 iOS/移动端窄屏目标，同时复用同一信息架构和状态模型。
- Alternatives considered:
  - 窄屏保留双列：可读性和可操作性差。
  - 移动端完全不同信息结构：实现和测试成本高。
