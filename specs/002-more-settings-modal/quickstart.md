# Quickstart: 统一更多设置弹窗

## 目标

在不引入第三方 UI 库的前提下，实现并验证统一“更多设置”弹窗入口、全量配置迁移、快捷项拖拽排序、以及“清空缓存并重置全部设置”确认流程。

## 前置条件

- 当前分支：`001-more-settings-modal`
- Node/npm 依赖已安装
- 在仓库根目录执行命令

## 实施顺序（建议）

1. 在 `core/components/TopBar.vue` 增加“更多设置” icon 入口，接入弹窗开关状态。
2. 新增统一设置弹窗组件（建议 `core/components/MoreSettingsDialog.vue`），实现：
   - 左侧 5 分类导航（通用、滚动模式、书页模式、快捷设置、其他）
   - 右侧分组内容与平滑滚动定位
   - 当前分类高亮
3. 将旧顶栏二层“更多设置”中的配置项迁移到统一弹窗并删除旧二层交互。
4. 在“快捷设置”分组实现：
   - “阅读模式”固定第一位且不可改
   - 其他项可勾选显示 + 拖拽排序
   - “全局排序 + 当前模式过滤”渲染规则
5. 在“其他”分组实现：
   - github 链接
   - 版本号展示
   - “清空缓存并重置全部设置”二次确认后执行
6. 更新 `core/assets/i18n.ts` 文案键，保证中英日语言可显示。
7. 更新 `core/store/app.ts` 状态与持久化逻辑，保证非法值回退默认值。

## 验证步骤

1. 类型检查：

```bash
npm run type-check
```

2. 本地运行：

```bash
npm run dev
```

3. 使用 `chrome-devtools-mcp` 进行运行时验收（必做）：
   - 打开阅读器页面，确认顶栏新增“更多设置”图标
   - 点击图标打开弹窗，验证左侧点击触发右侧平滑滚动与高亮
   - 确认不存在旧二层“更多设置”展开区域
   - 逐分类核对配置项是否完整（含旧高级项）
   - 在快捷设置中验证固定项、勾选、拖拽排序、模式过滤展示
   - 执行“清空缓存并重置全部设置”，验证二次确认、执行反馈、默认值恢复
   - 在窄屏尺寸下验证弹窗可用性与可读性

## 完成定义（DoD）

- 规格中的 FR-001 ~ FR-020 全部可映射到实现与验收步骤。
- `npm run type-check` 通过。
- `npm run dev` + `chrome-devtools-mcp` 手工验收通过并留有记录。
- 书页/滚动两种模式下快捷配置栏行为一致且符合模式专属过滤规则。
